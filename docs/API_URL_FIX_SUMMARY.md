# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å URL API –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

## üîç **–ü—Ä–æ–±–ª–µ–º–∞**

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–∫–∏ `KeyError: 'user_info'` –≤–æ–∑–Ω–∏–∫–ª–∞ –Ω–æ–≤–∞—è –ø—Ä–æ–±–ª–µ–º–∞:

**–û—à–∏–±–∫–∞ 404 –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ:**
```
2025-08-14 10:27:47 DEBUG accounts.views –ó–∞–ø—Ä–æ—Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –Ω–∞ http://127.0.0.1:9090/api/v1/auth/get_data
2025-08-14 10:27:47 DEBUG accounts.views –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞: —Å—Ç–∞—Ç—É—Å 404
2025-08-14 10:27:47 ERROR accounts.views –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞: {"detail":"–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"}
```

## üö® **–ü—Ä–∏—á–∏–Ω–∞**

**–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ URL API –º–µ–∂–¥—É —Ñ–∞–π–ª–∞–º–∏:**

1. **–í `views.py`** (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è): –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `http://127.0.0.1:9090/api/v1/auth`
2. **–í `middleware.py`**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `http://172.16.251.170:9090/api/v1/auth` (—Ö–∞—Ä–¥–∫–æ–¥)
3. **–í `settings.py`**: –±—ã–ª —É–∫–∞–∑–∞–Ω `http://127.0.0.1:9090/api/v1/auth`

**API endpoint `/get_data` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ `172.16.251.170:9090`, –Ω–æ –Ω–µ –Ω–∞ `127.0.0.1:9090`**

## ‚úÖ **–†–µ—à–µ–Ω–∏–µ**

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω URL –≤ `settings.py`**
```python
# –ë–´–õ–û:
'BASE_URL': 'http://127.0.0.1:9090/api/v1/auth'

# –°–¢–ê–õ–û:
'BASE_URL': 'http://172.16.251.170:9090/api/v1/auth'
```

### 2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω middleware –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ Django**
```python
# –ë–´–õ–û:
self.auth_api_base = 'http://172.16.251.170:9090/api/v1/auth'

# –°–¢–ê–õ–û:
self.auth_api_base = getattr(settings, 'AUTH_CONFIG', {}).get('EXTERNAL_API', {}).get('BASE_URL', 'http://127.0.0.1:9090/api/v1/auth')
```

### 3. **–î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ URL –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏**
```python
# –õ–æ–≥–∏—Ä—É–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π URL API –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
logger.info(f"API_BASE –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞: {API_BASE}")
```

## üîß **–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**

1. **–£–±—Ä–∞–Ω–æ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ URL** –º–µ–∂–¥—É —Ñ–∞–π–ª–∞–º–∏
2. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `settings.py`
3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ä–∞–±–æ—á–∏–π URL** - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `172.16.251.170:9090`
4. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ URL

## üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç**

‚úÖ **–û—à–∏–±–∫–∞ 404 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞** - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL API
‚úÖ **–ï–¥–∏–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚úÖ **–õ—É—á—à–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ URL –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏** - –≤—Å–µ –∑–∞–ø–∏—Å–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —É—Å–ø–µ—à–Ω–æ
2. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –¥–æ–ª–∂–Ω–∞ –ø–æ–ª—É—á–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–∫–∏ 404
3. Middleware –¥–æ–ª–∂–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–æ–∫–µ–Ω—ã
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## üìù **–í–∞–∂–Ω–æ**

–¢–µ–ø–µ—Ä—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é API –∏–∑ `settings.py`. –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è URL API –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ñ–∞–π–ª - `settings.py`.
