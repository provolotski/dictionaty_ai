2025-08-15 07:15:00 INFO django.utils.autoreload Watching for file changes with StatReloader
2025-08-15 07:15:00 INFO django.utils.autoreload Watching for file changes with StatReloader
2025-08-15 07:15:00 INFO accounts.views API_BASE настроен на: http://127.0.0.1:9090/api/v1/auth
2025-08-15 07:15:11 INFO accounts.middleware GET_DATA request → url=http://127.0.0.1:9090/api/v1/auth/get_data, headers={'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NTUyNDM4MDEsImlhdCI6MTc1NTI0MjAwMSwic2NvcGUiOiJhY2Nlc3NfdG9rZW4iLCJzdWIiOiJ7XCJndWlkXCI6XCI4YzUyN2Y0ZC1jMDczLTQ1M2MtYjhiNS0wODJlMDQwYjRkMTlcIixcInVzZXJuYW1lXCI6XCJcdTA0MTBcdTA0MzRcdTA0M2NcdTA0MzhcdTA0M2QgXHUwNDIxXHUwNDFmX1x1MDQxMVx1MDQxNFwiLFwiZG9tYWluXCI6XCJiZWxzdGF0XCJ9In0.Hmy-1wy98O5SE_8tLaNsXTcZ2okvYa8BpYSNWfggwZA', 'Content-Type': 'application/json'}, timeout=10
2025-08-15 07:15:11 INFO accounts.middleware GET_DATA response ← status=200, headers={'date': 'Fri, 15 Aug 2025 07:15:10 GMT', 'server': 'uvicorn', 'content-length': '169', 'content-type': 'application/json', 'x-content-type-options': 'nosniff', 'x-frame-options': 'DENY', 'x-xss-protection': '1; mode=block', 'x-processing-time': '0.017426729202270508', 'x-ratelimit-limit': '200/minute, 2000/hour, 20000/day', 'x-ratelimit-remaining': 'calculated'}
2025-08-15 07:15:11 INFO accounts.middleware GET_DATA body ← {"status":"success","user":{"guid":"8c527f4d-c073-453c-b8b5-082e040b4d19","username":"Админ СП_БД","domain":"belstat"},"timestamp":"2025-08-15T10:15:11.556603"}
2025-08-15 07:15:11 INFO accounts.utils AUTH_EVENT: middleware_token_valid - User: Админ СП_БД@unknown - IP: 127.0.0.1
2025-08-15 07:15:11 INFO accounts.utils AUDIT POST → http://127.0.0.1:8000/api/v1/audit/log payload={'username': 'Админ СП_БД', 'domain': 'belstat', 'ip_address': '127.0.0.1', 'user_agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/141.0', 'action': 'Логаут пользователя', 'status': 'успешно', 'comment': '', 'guid': '8c527f4d-c073-453c-b8b5-082e040b4d19'}
2025-08-15 07:15:11 INFO accounts.utils AUDIT POST ← status=201 body={"id":44,"username":"Админ СП_БД","domain":"belstat","ip_address":"127.0.0.1","user_agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/141.0","action":"Логаут пользователя","datetime":"2025-08-15T07:11:54.810861","status":"успешно","comment":""}
2025-08-15 07:15:11 INFO django.server "POST /accounts/logout/ HTTP/1.1" 302 0
2025-08-15 07:15:11 INFO django.server "POST /accounts/logout/ HTTP/1.1" 302 0
2025-08-15 07:15:11 WARNING accounts.utils AUTH_EVENT_FAILED: middleware_no_token - User: anonymous@unknown - IP: 127.0.0.1 - Error: No access token in session
2025-08-15 07:15:11 WARNING accounts.utils AUTH_EVENT_FAILED: middleware_redirect - User: anonymous@unknown - IP: 127.0.0.1 - Error: Unauthenticated user redirected to login from /
2025-08-15 07:15:11 INFO django.server "GET / HTTP/1.1" 302 0
2025-08-15 07:15:11 INFO django.server "GET / HTTP/1.1" 302 0
2025-08-15 07:15:11 INFO accounts.utils SYSTEM_EVENT: page_view - Login page accessed from IP: 127.0.0.1 - Data: {'page': 'login', 'ip_address': '127.0.0.1'}
2025-08-15 07:15:11 INFO django.server "GET /accounts/login/ HTTP/1.1" 200 48057
2025-08-15 07:15:11 INFO django.server "GET /accounts/login/ HTTP/1.1" 200 48057
2025-08-15 07:15:11 INFO accounts.utils SYSTEM_EVENT: page_view - Login page accessed from IP: 127.0.0.1 - Data: {'page': 'login', 'ip_address': '127.0.0.1'}
2025-08-15 07:15:11 INFO django.server "GET /login/ HTTP/1.1" 200 48057
2025-08-15 07:15:11 INFO django.server "GET /login/ HTTP/1.1" 200 48057
2025-08-15 07:18:22 INFO accounts.utils AUTH_EVENT: login_attempt - User: admin_db_app@belstat - IP: 127.0.0.1
2025-08-15 07:18:22 INFO accounts.views === НАЧАЛО АВТОРИЗАЦИИ ===
2025-08-15 07:18:22 INFO accounts.views Пользователь: admin_db_app
2025-08-15 07:18:22 INFO accounts.views Домен: belstat
2025-08-15 07:18:22 INFO accounts.views Время запроса: 2025-08-15 07:18:22.783584+00:00
2025-08-15 07:18:22 INFO accounts.views IP адрес: 127.0.0.1
2025-08-15 07:18:22 INFO accounts.views User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/141.0
2025-08-15 07:18:22 INFO accounts.views Конфигурация AUTH_CONFIG: {'USE_EXTERNAL_API': True, 'EXTERNAL_API': {'BASE_URL': 'http://127.0.0.1:9090/api/v1/auth', 'ENABLED': True, 'TIMEOUT': 30, 'RETRY_ATTEMPTS': 3}, 'LOCAL_AUTH': {'ENABLED': False, 'FALLBACK': False}}
2025-08-15 07:18:22 INFO accounts.utils SYSTEM_EVENT: auth_manager_init - AuthManager инициализирован: external_api_enabled=True - Data: {'external_api_enabled': True, 'config': {'BASE_URL': 'http://127.0.0.1:9090/api/v1/auth', 'ENABLED': True, 'TIMEOUT': 30, 'RETRY_ATTEMPTS': 3}}
2025-08-15 07:18:22 INFO accounts.views Менеджер авторизации загружен: AuthManager
2025-08-15 07:18:22 INFO accounts.utils AUTH_EVENT: auth_start - User: admin_db_app@belstat - IP: 127.0.0.1
2025-08-15 07:18:22 INFO accounts.utils SYSTEM_EVENT: auth_method - Попытка аутентификации через внешний API
2025-08-15 07:18:22 INFO accounts.auth_manager === ВНЕШНИЙ API: Начало ===
2025-08-15 07:18:22 INFO accounts.auth_manager Base URL: http://127.0.0.1:9090/api/v1/auth
2025-08-15 07:18:22 INFO accounts.auth_manager Timeout: 30 сек
2025-08-15 07:18:22 INFO accounts.auth_manager Попытки повтора: 3
2025-08-15 07:18:22 INFO accounts.auth_manager URL запроса: http://127.0.0.1:9090/api/v1/auth/login
2025-08-15 07:18:22 INFO accounts.auth_manager Заголовки: {'Content-Type': 'application/json', 'Accept': 'application/json'}
2025-08-15 07:18:22 INFO accounts.auth_manager Данные запроса: admin_db_app@belstat
2025-08-15 07:18:22 INFO accounts.auth_manager Полные данные (без пароля): {'username': 'admin_db_app', 'domain': 'belstat'}
2025-08-15 07:18:22 INFO accounts.auth_manager --- Попытка 1/3 ---
2025-08-15 07:18:22 INFO accounts.auth_manager Отправка POST запроса на http://127.0.0.1:9090/api/v1/auth/login
2025-08-15 07:18:22 INFO accounts.auth_manager Получен ответ за 0.12 сек
2025-08-15 07:18:22 INFO accounts.auth_manager HTTP статус: 200
2025-08-15 07:18:22 INFO accounts.auth_manager Заголовки ответа: {'date': 'Fri, 15 Aug 2025 07:18:22 GMT', 'server': 'uvicorn', 'content-length': '775', 'content-type': 'application/json', 'x-content-type-options': 'nosniff', 'x-frame-options': 'DENY', 'x-xss-protection': '1; mode=block', 'x-processing-time': '0.11615300178527832', 'x-ratelimit-limit': '200/minute, 2000/hour, 20000/day', 'x-ratelimit-remaining': 'calculated'}
2025-08-15 07:18:22 INFO accounts.auth_manager Размер ответа: 775 байт
2025-08-15 07:18:22 INFO accounts.auth_manager JSON ответ: {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NTUyNDQxMDIsImlhdCI6MTc1NTI0MjMwMiwic2NvcGUiOiJhY2Nlc3NfdG9rZW4iLCJzdWIiOiJ7XCJndWlkXCI6XCI4YzUyN2Y0ZC1jMDczLTQ1M2MtYjhiNS0wODJlMDQwYjRkMTlcIixcInVzZXJuYW1lXCI6XCJcdTA0MTBcdTA0MzRcdTA0M2NcdTA0MzhcdTA0M2QgXHUwNDIxXHUwNDFmX1x1MDQxMVx1MDQxNFwiLFwiZG9tYWluXCI6XCJiZWxzdGF0XCJ9In0.Fr89OdcfxaZZrQAAxvbYEm1uYhiiUGAYbiECReG08mg', 'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NTU4NDcxMDIsImlhdCI6MTc1NTI0MjMwMiwic2NvcGUiOiJyZWZyZXNoX3Rva2VuIiwic3ViIjoie1wiZ3VpZFwiOlwiOGM1MjdmNGQtYzA3My00NTNjLWI4YjUtMDgyZTA0MGI0ZDE5XCIsXCJ1c2VybmFtZVwiOlwiXHUwNDEwXHUwNDM0XHUwNDNjXHUwNDM4XHUwNDNkIFx1MDQyMVx1MDQxZl9cdTA0MTFcdTA0MTRcIixcImRvbWFpblwiOlwiYmVsc3RhdFwifSJ9.rVvle9Yz96FsgLAI2pOcqNa6hK0dV7iZ_3UvVRZOiXY'}
2025-08-15 07:18:22 INFO accounts.auth_manager ✅ Валидный ответ с токенами получен
2025-08-15 07:18:22 INFO accounts.auth_manager === Проверка прав доступа ===
2025-08-15 07:18:22 INFO accounts.auth_manager Access token для проверки прав: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3N...
2025-08-15 07:18:22 INFO accounts.auth_manager Длина access token: 368
2025-08-15 07:18:22 INFO accounts.permissions Проверка прав доступа для пользователя admin_db_app в домене belstat
2025-08-15 07:18:23 INFO accounts.permissions Пользователь admin_db_app@belstat имеет доступ. Группы: ['EISGS_Users', 'EISGS_AppSecurity']
2025-08-15 07:18:23 INFO accounts.auth_manager ✅ Пользователь admin_db_app@belstat имеет права доступа
2025-08-15 07:18:23 INFO accounts.auth_manager Группы пользователя: ['EISGS_Users', 'EISGS_AppSecurity']
2025-08-15 07:18:23 INFO accounts.utils AUTH_EVENT: auth_success - User: admin_db_app@belstat - IP: 127.0.0.1
2025-08-15 07:18:23 INFO accounts.views Результат авторизации: success=True, error=None
2025-08-15 07:18:23 INFO accounts.views Запись в аудите создана
2025-08-15 07:18:23 INFO accounts.views === УСПЕШНАЯ АВТОРИЗАЦИЯ ===
2025-08-15 07:18:23 INFO accounts.views Получены токены: True, True
2025-08-15 07:18:23 INFO accounts.views Токены сохранены в сессии
2025-08-15 07:18:23 INFO accounts.views GET_DATA request → url=http://127.0.0.1:9090/api/v1/auth/get_data, headers={'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NTUyNDQxMDIsImlhdCI6MTc1NTI0MjMwMiwic2NvcGUiOiJhY2Nlc3NfdG9rZW4iLCJzdWIiOiJ7XCJndWlkXCI6XCI4YzUyN2Y0ZC1jMDczLTQ1M2MtYjhiNS0wODJlMDQwYjRkMTlcIixcInVzZXJuYW1lXCI6XCJcdTA0MTBcdTA0MzRcdTA0M2NcdTA0MzhcdTA0M2QgXHUwNDIxXHUwNDFmX1x1MDQxMVx1MDQxNFwiLFwiZG9tYWluXCI6XCJiZWxzdGF0XCJ9In0.Fr89OdcfxaZZrQAAxvbYEm1uYhiiUGAYbiECReG08mg', 'Content-Type': 'application/json'}, timeout=10
2025-08-15 07:18:23 INFO accounts.views GET_DATA response ← status=200, headers={'date': 'Fri, 15 Aug 2025 07:18:22 GMT', 'server': 'uvicorn', 'content-length': '169', 'content-type': 'application/json', 'x-content-type-options': 'nosniff', 'x-frame-options': 'DENY', 'x-xss-protection': '1; mode=block', 'x-processing-time': '0.017822742462158203', 'x-ratelimit-limit': '200/minute, 2000/hour, 20000/day', 'x-ratelimit-remaining': 'calculated'}
2025-08-15 07:18:23 INFO accounts.views GET_DATA body ← {"status":"success","user":{"guid":"8c527f4d-c073-453c-b8b5-082e040b4d19","username":"Админ СП_БД","domain":"belstat"},"timestamp":"2025-08-15T10:18:23.584944"}
2025-08-15 07:18:23 INFO accounts.views Информация о пользователе получена: Админ СП_БД
2025-08-15 07:18:23 INFO accounts.views has_audit_access(session) = True
2025-08-15 07:18:23 INFO accounts.views Установлена сессия до закрытия браузера
2025-08-15 07:18:23 INFO accounts.views === АВТОРИЗАЦИЯ ЗАВЕРШЕНА УСПЕШНО ===
2025-08-15 07:18:23 INFO accounts.utils AUTH_EVENT: login_success - User: admin_db_app@belstat - IP: 127.0.0.1
2025-08-15 07:18:23 INFO accounts.utils AUDIT POST → http://127.0.0.1:8000/api/v1/audit/log payload={'username': 'Админ СП_БД', 'domain': 'belstat', 'ip_address': '127.0.0.1', 'user_agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/141.0', 'action': 'Логин пользователя', 'status': 'успешно', 'comment': '', 'guid': '8c527f4d-c073-453c-b8b5-082e040b4d19'}
2025-08-15 07:18:23 INFO accounts.utils AUDIT POST ← status=201 body={"id":45,"username":"Админ СП_БД","domain":"belstat","ip_address":"127.0.0.1","user_agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/141.0","action":"Логин пользователя","datetime":"2025-08-15T07:15:06.871982","status":"успешно","comment":""}
2025-08-15 07:18:23 INFO accounts.utils USER_ACTION: user_login - {'method': 'form_login', 'domain': 'belstat'}
2025-08-15 07:18:23 INFO django.server "POST /accounts/login/ HTTP/1.1" 200 162
2025-08-15 07:18:23 INFO django.server "POST /accounts/login/ HTTP/1.1" 200 162
2025-08-15 07:18:24 INFO accounts.middleware GET_DATA request → url=http://127.0.0.1:9090/api/v1/auth/get_data, headers={'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NTUyNDQxMDIsImlhdCI6MTc1NTI0MjMwMiwic2NvcGUiOiJhY2Nlc3NfdG9rZW4iLCJzdWIiOiJ7XCJndWlkXCI6XCI4YzUyN2Y0ZC1jMDczLTQ1M2MtYjhiNS0wODJlMDQwYjRkMTlcIixcInVzZXJuYW1lXCI6XCJcdTA0MTBcdTA0MzRcdTA0M2NcdTA0MzhcdTA0M2QgXHUwNDIxXHUwNDFmX1x1MDQxMVx1MDQxNFwiLFwiZG9tYWluXCI6XCJiZWxzdGF0XCJ9In0.Fr89OdcfxaZZrQAAxvbYEm1uYhiiUGAYbiECReG08mg', 'Content-Type': 'application/json'}, timeout=10
2025-08-15 07:18:24 INFO accounts.middleware GET_DATA response ← status=200, headers={'date': 'Fri, 15 Aug 2025 07:18:24 GMT', 'server': 'uvicorn', 'content-length': '169', 'content-type': 'application/json', 'x-content-type-options': 'nosniff', 'x-frame-options': 'DENY', 'x-xss-protection': '1; mode=block', 'x-processing-time': '0.01924753189086914', 'x-ratelimit-limit': '200/minute, 2000/hour, 20000/day', 'x-ratelimit-remaining': 'calculated'}
2025-08-15 07:18:24 INFO accounts.middleware GET_DATA body ← {"status":"success","user":{"guid":"8c527f4d-c073-453c-b8b5-082e040b4d19","username":"Админ СП_БД","domain":"belstat"},"timestamp":"2025-08-15T10:18:24.735282"}
2025-08-15 07:18:24 INFO accounts.utils AUTH_EVENT: middleware_token_valid - User: Админ СП_БД@unknown - IP: 127.0.0.1
2025-08-15 07:18:24 INFO django.server "GET / HTTP/1.1" 200 39474
2025-08-15 07:18:24 INFO django.server "GET / HTTP/1.1" 200 39474
2025-08-15 07:18:54 INFO accounts.middleware GET_DATA request → url=http://127.0.0.1:9090/api/v1/auth/get_data, headers={'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NTUyNDQxMDIsImlhdCI6MTc1NTI0MjMwMiwic2NvcGUiOiJhY2Nlc3NfdG9rZW4iLCJzdWIiOiJ7XCJndWlkXCI6XCI4YzUyN2Y0ZC1jMDczLTQ1M2MtYjhiNS0wODJlMDQwYjRkMTlcIixcInVzZXJuYW1lXCI6XCJcdTA0MTBcdTA0MzRcdTA0M2NcdTA0MzhcdTA0M2QgXHUwNDIxXHUwNDFmX1x1MDQxMVx1MDQxNFwiLFwiZG9tYWluXCI6XCJiZWxzdGF0XCJ9In0.Fr89OdcfxaZZrQAAxvbYEm1uYhiiUGAYbiECReG08mg', 'Content-Type': 'application/json'}, timeout=10
2025-08-15 07:18:54 INFO accounts.middleware GET_DATA response ← status=200, headers={'date': 'Fri, 15 Aug 2025 07:18:53 GMT', 'server': 'uvicorn', 'content-length': '169', 'content-type': 'application/json', 'x-content-type-options': 'nosniff', 'x-frame-options': 'DENY', 'x-xss-protection': '1; mode=block', 'x-processing-time': '0.01857590675354004', 'x-ratelimit-limit': '200/minute, 2000/hour, 20000/day', 'x-ratelimit-remaining': 'calculated'}
2025-08-15 07:18:54 INFO accounts.middleware GET_DATA body ← {"status":"success","user":{"guid":"8c527f4d-c073-453c-b8b5-082e040b4d19","username":"Админ СП_БД","domain":"belstat"},"timestamp":"2025-08-15T10:18:54.134264"}
2025-08-15 07:18:54 INFO accounts.utils AUTH_EVENT: middleware_token_valid - User: Админ СП_БД@unknown - IP: 127.0.0.1
2025-08-15 07:18:54 INFO accounts.utils AUDIT POST → http://127.0.0.1:8000/api/v1/audit/log payload={'username': 'Админ СП_БД', 'domain': 'belstat', 'ip_address': '127.0.0.1', 'user_agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/141.0', 'action': 'Логаут пользователя', 'status': 'успешно', 'comment': '', 'guid': '8c527f4d-c073-453c-b8b5-082e040b4d19'}
2025-08-15 07:18:54 INFO accounts.utils AUDIT POST ← status=201 body={"id":46,"username":"Админ СП_БД","domain":"belstat","ip_address":"127.0.0.1","user_agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/141.0","action":"Логаут пользователя","datetime":"2025-08-15T07:15:37.421672","status":"успешно","comment":""}
2025-08-15 07:18:54 INFO django.server "POST /accounts/logout/ HTTP/1.1" 302 0
2025-08-15 07:18:54 INFO django.server "POST /accounts/logout/ HTTP/1.1" 302 0
2025-08-15 07:18:54 WARNING accounts.utils AUTH_EVENT_FAILED: middleware_no_token - User: anonymous@unknown - IP: 127.0.0.1 - Error: No access token in session
2025-08-15 07:18:54 WARNING accounts.utils AUTH_EVENT_FAILED: middleware_redirect - User: anonymous@unknown - IP: 127.0.0.1 - Error: Unauthenticated user redirected to login from /
2025-08-15 07:18:54 INFO django.server "GET / HTTP/1.1" 302 0
2025-08-15 07:18:54 INFO django.server "GET / HTTP/1.1" 302 0
2025-08-15 07:18:54 INFO accounts.utils SYSTEM_EVENT: page_view - Login page accessed from IP: 127.0.0.1 - Data: {'page': 'login', 'ip_address': '127.0.0.1'}
2025-08-15 07:18:54 INFO django.server "GET /accounts/login/ HTTP/1.1" 200 48057
2025-08-15 07:18:54 INFO django.server "GET /accounts/login/ HTTP/1.1" 200 48057
2025-08-15 07:18:54 INFO accounts.utils SYSTEM_EVENT: page_view - Login page accessed from IP: 127.0.0.1 - Data: {'page': 'login', 'ip_address': '127.0.0.1'}
2025-08-15 07:18:54 INFO django.server "GET /login/ HTTP/1.1" 200 48057
2025-08-15 07:18:54 INFO django.server "GET /login/ HTTP/1.1" 200 48057
2025-08-15 07:19:01 WARNING accounts.utils AUTH_EVENT_FAILED: middleware_no_token - User: anonymous@unknown - IP: 127.0.0.1 - Error: No access token in session
2025-08-15 07:19:01 WARNING accounts.utils AUTH_EVENT_FAILED: middleware_redirect - User: anonymous@unknown - IP: 127.0.0.1 - Error: Unauthenticated user redirected to login from /login
2025-08-15 07:19:01 INFO django.server "GET /login HTTP/1.1" 302 0
2025-08-15 07:19:01 INFO django.server "GET /login HTTP/1.1" 302 0
2025-08-15 07:19:01 INFO accounts.utils SYSTEM_EVENT: page_view - Login page accessed from IP: 127.0.0.1 - Data: {'page': 'login', 'ip_address': '127.0.0.1'}
2025-08-15 07:19:01 INFO django.server "GET /accounts/login/ HTTP/1.1" 200 48057
2025-08-15 07:19:01 INFO django.server "GET /accounts/login/ HTTP/1.1" 200 48057
2025-08-15 07:19:10 INFO accounts.utils AUTH_EVENT: login_attempt - User: admin_db_app@belstat - IP: 127.0.0.1
2025-08-15 07:19:10 INFO accounts.views === НАЧАЛО АВТОРИЗАЦИИ ===
2025-08-15 07:19:10 INFO accounts.views Пользователь: admin_db_app
2025-08-15 07:19:10 INFO accounts.views Домен: belstat
2025-08-15 07:19:10 INFO accounts.views Время запроса: 2025-08-15 07:19:10.081504+00:00
2025-08-15 07:19:10 INFO accounts.views IP адрес: 127.0.0.1
2025-08-15 07:19:10 INFO accounts.views User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/141.0
2025-08-15 07:19:10 INFO accounts.views Конфигурация AUTH_CONFIG: {'USE_EXTERNAL_API': True, 'EXTERNAL_API': {'BASE_URL': 'http://127.0.0.1:9090/api/v1/auth', 'ENABLED': True, 'TIMEOUT': 30, 'RETRY_ATTEMPTS': 3}, 'LOCAL_AUTH': {'ENABLED': False, 'FALLBACK': False}}
2025-08-15 07:19:10 INFO accounts.views Менеджер авторизации загружен: AuthManager
2025-08-15 07:19:10 INFO accounts.utils AUTH_EVENT: auth_start - User: admin_db_app@belstat - IP: 127.0.0.1
2025-08-15 07:19:10 INFO accounts.utils SYSTEM_EVENT: auth_method - Попытка аутентификации через внешний API
2025-08-15 07:19:10 INFO accounts.auth_manager === ВНЕШНИЙ API: Начало ===
2025-08-15 07:19:10 INFO accounts.auth_manager Base URL: http://127.0.0.1:9090/api/v1/auth
2025-08-15 07:19:10 INFO accounts.auth_manager Timeout: 30 сек
2025-08-15 07:19:10 INFO accounts.auth_manager Попытки повтора: 3
2025-08-15 07:19:10 INFO accounts.auth_manager URL запроса: http://127.0.0.1:9090/api/v1/auth/login
2025-08-15 07:19:10 INFO accounts.auth_manager Заголовки: {'Content-Type': 'application/json', 'Accept': 'application/json'}
2025-08-15 07:19:10 INFO accounts.auth_manager Данные запроса: admin_db_app@belstat
2025-08-15 07:19:10 INFO accounts.auth_manager Полные данные (без пароля): {'username': 'admin_db_app', 'domain': 'belstat'}
2025-08-15 07:19:10 INFO accounts.auth_manager --- Попытка 1/3 ---
2025-08-15 07:19:10 INFO accounts.auth_manager Отправка POST запроса на http://127.0.0.1:9090/api/v1/auth/login
2025-08-15 07:19:10 INFO accounts.auth_manager Получен ответ за 0.43 сек
2025-08-15 07:19:10 INFO accounts.auth_manager HTTP статус: 200
2025-08-15 07:19:10 INFO accounts.auth_manager Заголовки ответа: {'date': 'Fri, 15 Aug 2025 07:19:09 GMT', 'server': 'uvicorn', 'content-length': '775', 'content-type': 'application/json', 'x-content-type-options': 'nosniff', 'x-frame-options': 'DENY', 'x-xss-protection': '1; mode=block', 'x-processing-time': '0.4309661388397217', 'x-ratelimit-limit': '200/minute, 2000/hour, 20000/day', 'x-ratelimit-remaining': 'calculated'}
2025-08-15 07:19:10 INFO accounts.auth_manager Размер ответа: 775 байт
2025-08-15 07:19:10 INFO accounts.auth_manager JSON ответ: {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NTUyNDQxNTAsImlhdCI6MTc1NTI0MjM1MCwic2NvcGUiOiJhY2Nlc3NfdG9rZW4iLCJzdWIiOiJ7XCJndWlkXCI6XCI4YzUyN2Y0ZC1jMDczLTQ1M2MtYjhiNS0wODJlMDQwYjRkMTlcIixcInVzZXJuYW1lXCI6XCJcdTA0MTBcdTA0MzRcdTA0M2NcdTA0MzhcdTA0M2QgXHUwNDIxXHUwNDFmX1x1MDQxMVx1MDQxNFwiLFwiZG9tYWluXCI6XCJiZWxzdGF0XCJ9In0.vx5_45bIVTTuzjImIjGIaHPg5_t0zWpenh71jkFLaU0', 'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NTU4NDcxNTAsImlhdCI6MTc1NTI0MjM1MCwic2NvcGUiOiJyZWZyZXNoX3Rva2VuIiwic3ViIjoie1wiZ3VpZFwiOlwiOGM1MjdmNGQtYzA3My00NTNjLWI4YjUtMDgyZTA0MGI0ZDE5XCIsXCJ1c2VybmFtZVwiOlwiXHUwNDEwXHUwNDM0XHUwNDNjXHUwNDM4XHUwNDNkIFx1MDQyMVx1MDQxZl9cdTA0MTFcdTA0MTRcIixcImRvbWFpblwiOlwiYmVsc3RhdFwifSJ9.5BpI11HspBn5TQmxkYf3HL3iSdt89pM6RzhREvh0Ywc'}
2025-08-15 07:19:10 INFO accounts.auth_manager ✅ Валидный ответ с токенами получен
2025-08-15 07:19:10 INFO accounts.auth_manager === Проверка прав доступа ===
2025-08-15 07:19:10 INFO accounts.auth_manager Access token для проверки прав: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3N...
2025-08-15 07:19:10 INFO accounts.auth_manager Длина access token: 368
2025-08-15 07:19:10 INFO accounts.permissions Проверка прав доступа для пользователя admin_db_app в домене belstat
2025-08-15 07:19:10 INFO accounts.permissions Пользователь admin_db_app@belstat имеет доступ. Группы: ['EISGS_Users', 'EISGS_AppSecurity']
2025-08-15 07:19:10 INFO accounts.auth_manager ✅ Пользователь admin_db_app@belstat имеет права доступа
2025-08-15 07:19:10 INFO accounts.auth_manager Группы пользователя: ['EISGS_Users', 'EISGS_AppSecurity']
2025-08-15 07:19:10 INFO accounts.utils AUTH_EVENT: auth_success - User: admin_db_app@belstat - IP: 127.0.0.1
2025-08-15 07:19:10 INFO accounts.views Результат авторизации: success=True, error=None
2025-08-15 07:19:10 INFO accounts.views Запись в аудите создана
2025-08-15 07:19:10 INFO accounts.views === УСПЕШНАЯ АВТОРИЗАЦИЯ ===
2025-08-15 07:19:10 INFO accounts.views Получены токены: True, True
2025-08-15 07:19:10 INFO accounts.views Токены сохранены в сессии
2025-08-15 07:19:10 INFO accounts.views GET_DATA request → url=http://127.0.0.1:9090/api/v1/auth/get_data, headers={'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NTUyNDQxNTAsImlhdCI6MTc1NTI0MjM1MCwic2NvcGUiOiJhY2Nlc3NfdG9rZW4iLCJzdWIiOiJ7XCJndWlkXCI6XCI4YzUyN2Y0ZC1jMDczLTQ1M2MtYjhiNS0wODJlMDQwYjRkMTlcIixcInVzZXJuYW1lXCI6XCJcdTA0MTBcdTA0MzRcdTA0M2NcdTA0MzhcdTA0M2QgXHUwNDIxXHUwNDFmX1x1MDQxMVx1MDQxNFwiLFwiZG9tYWluXCI6XCJiZWxzdGF0XCJ9In0.vx5_45bIVTTuzjImIjGIaHPg5_t0zWpenh71jkFLaU0', 'Content-Type': 'application/json'}, timeout=10
2025-08-15 07:19:10 INFO accounts.views GET_DATA response ← status=200, headers={'date': 'Fri, 15 Aug 2025 07:19:09 GMT', 'server': 'uvicorn', 'content-length': '169', 'content-type': 'application/json', 'x-content-type-options': 'nosniff', 'x-frame-options': 'DENY', 'x-xss-protection': '1; mode=block', 'x-processing-time': '0.019226789474487305', 'x-ratelimit-limit': '200/minute, 2000/hour, 20000/day', 'x-ratelimit-remaining': 'calculated'}
2025-08-15 07:19:10 INFO accounts.views GET_DATA body ← {"status":"success","user":{"guid":"8c527f4d-c073-453c-b8b5-082e040b4d19","username":"Админ СП_БД","domain":"belstat"},"timestamp":"2025-08-15T10:19:10.894754"}
2025-08-15 07:19:10 INFO accounts.views Информация о пользователе получена: Админ СП_БД
2025-08-15 07:19:10 INFO accounts.views has_audit_access(session) = True
2025-08-15 07:19:10 INFO accounts.views Установлена сессия до закрытия браузера
2025-08-15 07:19:10 INFO accounts.views === АВТОРИЗАЦИЯ ЗАВЕРШЕНА УСПЕШНО ===
2025-08-15 07:19:10 INFO accounts.utils AUTH_EVENT: login_success - User: admin_db_app@belstat - IP: 127.0.0.1
2025-08-15 07:19:10 INFO accounts.utils AUDIT POST → http://127.0.0.1:8000/api/v1/audit/log payload={'username': 'Админ СП_БД', 'domain': 'belstat', 'ip_address': '127.0.0.1', 'user_agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/141.0', 'action': 'Логин пользователя', 'status': 'успешно', 'comment': '', 'guid': '8c527f4d-c073-453c-b8b5-082e040b4d19'}
2025-08-15 07:19:10 INFO accounts.utils AUDIT POST ← status=201 body={"id":47,"username":"Админ СП_БД","domain":"belstat","ip_address":"127.0.0.1","user_agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/141.0","action":"Логин пользователя","datetime":"2025-08-15T07:15:54.153087","status":"успешно","comment":""}
2025-08-15 07:19:10 INFO accounts.utils USER_ACTION: user_login - {'method': 'form_login', 'domain': 'belstat'}
2025-08-15 07:19:10 INFO django.server "POST /accounts/login/ HTTP/1.1" 200 162
2025-08-15 07:19:10 INFO django.server "POST /accounts/login/ HTTP/1.1" 200 162
2025-08-15 07:19:12 INFO accounts.middleware GET_DATA request → url=http://127.0.0.1:9090/api/v1/auth/get_data, headers={'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NTUyNDQxNTAsImlhdCI6MTc1NTI0MjM1MCwic2NvcGUiOiJhY2Nlc3NfdG9rZW4iLCJzdWIiOiJ7XCJndWlkXCI6XCI4YzUyN2Y0ZC1jMDczLTQ1M2MtYjhiNS0wODJlMDQwYjRkMTlcIixcInVzZXJuYW1lXCI6XCJcdTA0MTBcdTA0MzRcdTA0M2NcdTA0MzhcdTA0M2QgXHUwNDIxXHUwNDFmX1x1MDQxMVx1MDQxNFwiLFwiZG9tYWluXCI6XCJiZWxzdGF0XCJ9In0.vx5_45bIVTTuzjImIjGIaHPg5_t0zWpenh71jkFLaU0', 'Content-Type': 'application/json'}, timeout=10
2025-08-15 07:19:12 INFO accounts.middleware GET_DATA response ← status=200, headers={'date': 'Fri, 15 Aug 2025 07:19:11 GMT', 'server': 'uvicorn', 'content-length': '169', 'content-type': 'application/json', 'x-content-type-options': 'nosniff', 'x-frame-options': 'DENY', 'x-xss-protection': '1; mode=block', 'x-processing-time': '0.016774415969848633', 'x-ratelimit-limit': '200/minute, 2000/hour, 20000/day', 'x-ratelimit-remaining': 'calculated'}
2025-08-15 07:19:12 INFO accounts.middleware GET_DATA body ← {"status":"success","user":{"guid":"8c527f4d-c073-453c-b8b5-082e040b4d19","username":"Админ СП_БД","domain":"belstat"},"timestamp":"2025-08-15T10:19:12.080158"}
2025-08-15 07:19:12 INFO accounts.utils AUTH_EVENT: middleware_token_valid - User: Админ СП_БД@unknown - IP: 127.0.0.1
2025-08-15 07:19:12 INFO django.server "GET / HTTP/1.1" 200 39474
2025-08-15 07:19:12 INFO django.server "GET / HTTP/1.1" 200 39474
2025-08-15 07:19:36 INFO accounts.middleware GET_DATA request → url=http://127.0.0.1:9090/api/v1/auth/get_data, headers={'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NTUyNDQxNTAsImlhdCI6MTc1NTI0MjM1MCwic2NvcGUiOiJhY2Nlc3NfdG9rZW4iLCJzdWIiOiJ7XCJndWlkXCI6XCI4YzUyN2Y0ZC1jMDczLTQ1M2MtYjhiNS0wODJlMDQwYjRkMTlcIixcInVzZXJuYW1lXCI6XCJcdTA0MTBcdTA0MzRcdTA0M2NcdTA0MzhcdTA0M2QgXHUwNDIxXHUwNDFmX1x1MDQxMVx1MDQxNFwiLFwiZG9tYWluXCI6XCJiZWxzdGF0XCJ9In0.vx5_45bIVTTuzjImIjGIaHPg5_t0zWpenh71jkFLaU0', 'Content-Type': 'application/json'}, timeout=10
2025-08-15 07:19:36 INFO accounts.middleware GET_DATA response ← status=200, headers={'date': 'Fri, 15 Aug 2025 07:19:36 GMT', 'server': 'uvicorn', 'content-length': '169', 'content-type': 'application/json', 'x-content-type-options': 'nosniff', 'x-frame-options': 'DENY', 'x-xss-protection': '1; mode=block', 'x-processing-time': '0.018408536911010742', 'x-ratelimit-limit': '200/minute, 2000/hour, 20000/day', 'x-ratelimit-remaining': 'calculated'}
2025-08-15 07:19:36 INFO accounts.middleware GET_DATA body ← {"status":"success","user":{"guid":"8c527f4d-c073-453c-b8b5-082e040b4d19","username":"Админ СП_БД","domain":"belstat"},"timestamp":"2025-08-15T10:19:36.583641"}
2025-08-15 07:19:36 INFO accounts.utils AUTH_EVENT: middleware_token_valid - User: Админ СП_БД@unknown - IP: 127.0.0.1
2025-08-15 07:19:36 INFO accounts.utils USERS GET → http://127.0.0.1:8000/api/v1/users params={'page': 1, 'page_size': 25}
2025-08-15 07:19:36 INFO accounts.utils USERS GET ← status=200
2025-08-15 07:19:36 INFO accounts.utils USERS GET ← response data: {'users': [{'id': 4, 'guid': '1d2dd223-c552-4106-95a6-9d2f4a732c3c', 'name': 'Проволоцкий Вячеслав Евгеньевич1', 'domain': 'belstat', 'created_at': '2025-08-15T07:09:36.797927Z', 'last_login_at': '2025-08-16T07:09:36.797000Z'}, {'id': 3, 'guid': '8c527f4d-c073-453c-b8b5-082e040b4d19', 'name': 'Админ СП_БД', 'domain': 'belstat', 'created_at': '2025-08-10T07:08:40.667000Z', 'last_login_at': '2025-08-15T07:15:54.156799Z'}], 'total': 2, 'page': 1, 'page_size': 25, 'total_pages': 1}
2025-08-15 07:19:36 INFO accounts.utils USERS GET ← users count: 2
2025-08-15 07:19:36 INFO accounts.utils USERS GET ← sample user: {'id': 4, 'guid': '1d2dd223-c552-4106-95a6-9d2f4a732c3c', 'name': 'Проволоцкий Вячеслав Евгеньевич1', 'domain': 'belstat', 'created_at': '2025-08-15T07:09:36.797927Z', 'last_login_at': '2025-08-16T07:09:36.797000Z'}
2025-08-15 07:19:36 INFO django.server "GET /accounts/users/ HTTP/1.1" 200 38349
2025-08-15 07:19:36 INFO django.server "GET /accounts/users/ HTTP/1.1" 200 38349
2025-08-15 07:20:44 INFO django.utils.autoreload /mnt/e/projects/belstat/python/dictionaty_ai/frontend/accounts/views.py changed, reloading.
2025-08-15 07:20:44 INFO django.utils.autoreload /mnt/e/projects/belstat/python/dictionaty_ai/frontend/accounts/views.py changed, reloading.
Performing system checks...

System check identified no issues (0 silenced).
August 15, 2025 - 07:15:00
Django version 5.2.5, using settings 'DictionaryFront.settings'
Starting development server at http://0.0.0.0:8001/
Quit the server with CONTROL-C.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
2025-08-15 07:20:46 INFO django.utils.autoreload Watching for file changes with StatReloader
2025-08-15 07:20:46 INFO django.utils.autoreload Watching for file changes with StatReloader
2025-08-15 07:20:46 INFO accounts.views API_BASE настроен на: http://127.0.0.1:9090/api/v1/auth
2025-08-15 07:20:47 ERROR accounts.middleware Error checking token validity: HTTPConnectionPool(host='127.0.0.1', port=9090): Max retries exceeded with url: /api/v1/auth/check_token (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f218c0a05c0>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-08-15 07:20:47 WARNING accounts.utils AUTH_EVENT_FAILED: middleware_token_expired - User: unknown@unknown - IP: 127.0.0.1 - Error: Access token expired, attempting refresh
2025-08-15 07:20:47 ERROR accounts.middleware Error refreshing token: HTTPConnectionPool(host='127.0.0.1', port=9090): Max retries exceeded with url: /api/v1/auth/refresh_token (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f2187f23b60>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-08-15 07:20:47 WARNING accounts.utils AUTH_EVENT_FAILED: middleware_refresh_failed - User: unknown@unknown - IP: 127.0.0.1 - Error: Failed to refresh token, clearing session
2025-08-15 07:20:47 WARNING accounts.utils AUTH_EVENT_FAILED: middleware_redirect - User: anonymous@unknown - IP: 127.0.0.1 - Error: Unauthenticated user redirected to login from /accounts/users/
2025-08-15 07:20:47 INFO django.server "GET /accounts/users/?search=&domain=&page_size=100 HTTP/1.1" 302 0
2025-08-15 07:20:47 INFO django.server "GET /accounts/users/?search=&domain=&page_size=100 HTTP/1.1" 302 0
2025-08-15 07:20:47 INFO accounts.utils SYSTEM_EVENT: page_view - Login page accessed from IP: 127.0.0.1 - Data: {'page': 'login', 'ip_address': '127.0.0.1'}
2025-08-15 07:20:48 INFO django.server "GET /accounts/login/ HTTP/1.1" 200 48057
2025-08-15 07:20:48 INFO django.server "GET /accounts/login/ HTTP/1.1" 200 48057
2025-08-15 07:20:59 INFO accounts.utils AUTH_EVENT: login_attempt - User: admin_db_app@belstat - IP: 127.0.0.1
2025-08-15 07:20:59 INFO accounts.views === НАЧАЛО АВТОРИЗАЦИИ ===
2025-08-15 07:20:59 INFO accounts.views Пользователь: admin_db_app
2025-08-15 07:20:59 INFO accounts.views Домен: belstat
2025-08-15 07:20:59 INFO accounts.views Время запроса: 2025-08-15 07:20:59.607185+00:00
2025-08-15 07:20:59 INFO accounts.views IP адрес: 127.0.0.1
2025-08-15 07:20:59 INFO accounts.views User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/141.0
2025-08-15 07:20:59 INFO accounts.views Конфигурация AUTH_CONFIG: {'USE_EXTERNAL_API': True, 'EXTERNAL_API': {'BASE_URL': 'http://127.0.0.1:9090/api/v1/auth', 'ENABLED': True, 'TIMEOUT': 30, 'RETRY_ATTEMPTS': 3}, 'LOCAL_AUTH': {'ENABLED': False, 'FALLBACK': False}}
2025-08-15 07:20:59 INFO accounts.utils SYSTEM_EVENT: auth_manager_init - AuthManager инициализирован: external_api_enabled=True - Data: {'external_api_enabled': True, 'config': {'BASE_URL': 'http://127.0.0.1:9090/api/v1/auth', 'ENABLED': True, 'TIMEOUT': 30, 'RETRY_ATTEMPTS': 3}}
2025-08-15 07:20:59 INFO accounts.views Менеджер авторизации загружен: AuthManager
2025-08-15 07:20:59 INFO accounts.utils AUTH_EVENT: auth_start - User: admin_db_app@belstat - IP: 127.0.0.1
2025-08-15 07:20:59 INFO accounts.utils SYSTEM_EVENT: auth_method - Попытка аутентификации через внешний API
2025-08-15 07:20:59 INFO accounts.auth_manager === ВНЕШНИЙ API: Начало ===
2025-08-15 07:20:59 INFO accounts.auth_manager Base URL: http://127.0.0.1:9090/api/v1/auth
2025-08-15 07:20:59 INFO accounts.auth_manager Timeout: 30 сек
2025-08-15 07:20:59 INFO accounts.auth_manager Попытки повтора: 3
2025-08-15 07:20:59 INFO accounts.auth_manager URL запроса: http://127.0.0.1:9090/api/v1/auth/login
2025-08-15 07:20:59 INFO accounts.auth_manager Заголовки: {'Content-Type': 'application/json', 'Accept': 'application/json'}
2025-08-15 07:20:59 INFO accounts.auth_manager Данные запроса: admin_db_app@belstat
2025-08-15 07:20:59 INFO accounts.auth_manager Полные данные (без пароля): {'username': 'admin_db_app', 'domain': 'belstat'}
2025-08-15 07:20:59 INFO accounts.auth_manager --- Попытка 1/3 ---
2025-08-15 07:20:59 INFO accounts.auth_manager Отправка POST запроса на http://127.0.0.1:9090/api/v1/auth/login
2025-08-15 07:20:59 ERROR accounts.auth_manager Ошибка соединения: HTTPConnectionPool(host='127.0.0.1', port=9090): Max retries exceeded with url: /api/v1/auth/login (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f2186e6f470>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-08-15 07:20:59 WARNING accounts.auth_manager Повторная попытка 2...
2025-08-15 07:20:59 INFO accounts.auth_manager --- Попытка 2/3 ---
2025-08-15 07:20:59 INFO accounts.auth_manager Отправка POST запроса на http://127.0.0.1:9090/api/v1/auth/login
2025-08-15 07:20:59 ERROR accounts.auth_manager Ошибка соединения: HTTPConnectionPool(host='127.0.0.1', port=9090): Max retries exceeded with url: /api/v1/auth/login (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f2186e6fc80>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-08-15 07:20:59 WARNING accounts.auth_manager Повторная попытка 3...
2025-08-15 07:20:59 INFO accounts.auth_manager --- Попытка 3/3 ---
2025-08-15 07:20:59 INFO accounts.auth_manager Отправка POST запроса на http://127.0.0.1:9090/api/v1/auth/login
2025-08-15 07:20:59 ERROR accounts.auth_manager Ошибка соединения: HTTPConnectionPool(host='127.0.0.1', port=9090): Max retries exceeded with url: /api/v1/auth/login (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f2186ea8440>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-08-15 07:20:59 ERROR accounts.auth_manager Все попытки исчерпаны, ошибка соединения
2025-08-15 07:20:59 WARNING accounts.utils AUTH_EVENT_FAILED: auth_failed - User: admin_db_app@belstat - IP: 127.0.0.1 - Error: Ошибка соединения с внешним API
2025-08-15 07:20:59 INFO accounts.views Результат авторизации: success=False, error=Ошибка соединения с внешним API
2025-08-15 07:20:59 INFO accounts.views Запись в аудите создана
2025-08-15 07:20:59 ERROR accounts.views === ОШИБКА АВТОРИЗАЦИИ ===
2025-08-15 07:20:59 ERROR accounts.views Сообщение об ошибке: Ошибка соединения с внешним API
2025-08-15 07:20:59 ERROR accounts.views Тип ошибки: <class 'str'>
2025-08-15 07:20:59 ERROR accounts.views Пользовательская ошибка: Ошибка соединения с внешним API
2025-08-15 07:20:59 WARNING accounts.utils AUTH_EVENT_FAILED: login_failed - User: admin_db_app@belstat - IP: 127.0.0.1 - Error: Ошибка соединения с внешним API
2025-08-15 07:20:59 INFO accounts.utils AUDIT POST → http://127.0.0.1:8000/api/v1/audit/log payload={'username': 'admin_db_app', 'domain': 'belstat', 'ip_address': '127.0.0.1', 'user_agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/141.0', 'action': 'Логин пользователя', 'status': 'failed', 'comment': 'Ошибка соединения с внешним API'}
2025-08-15 07:20:59 INFO accounts.utils AUDIT POST ← status=201 body={"id":48,"username":"admin_db_app","domain":"belstat","ip_address":"127.0.0.1","user_agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/141.0","action":"Логин пользователя","datetime":"2025-08-15T07:17:42.933332","status":"failed","comment":"Ошибка соединения с внешним API"}
2025-08-15 07:20:59 WARNING django.request Bad Request: /accounts/login/
2025-08-15 07:20:59 WARNING django.server "POST /accounts/login/ HTTP/1.1" 400 182
2025-08-15 07:20:59 WARNING django.server "POST /accounts/login/ HTTP/1.1" 400 182
2025-08-15 07:21:21 INFO django.utils.autoreload /mnt/e/projects/belstat/python/dictionaty_ai/frontend/accounts/views.py changed, reloading.
2025-08-15 07:21:21 INFO django.utils.autoreload /mnt/e/projects/belstat/python/dictionaty_ai/frontend/accounts/views.py changed, reloading.
Performing system checks...

System check identified no issues (0 silenced).
August 15, 2025 - 07:20:47
Django version 5.2.5, using settings 'DictionaryFront.settings'
Starting development server at http://0.0.0.0:8001/
Quit the server with CONTROL-C.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
2025-08-15 07:21:23 INFO django.utils.autoreload Watching for file changes with StatReloader
2025-08-15 07:21:23 INFO django.utils.autoreload Watching for file changes with StatReloader
2025-08-15 07:21:23 INFO accounts.views API_BASE настроен на: http://127.0.0.1:9090/api/v1/auth
2025-08-15 07:21:32 INFO django.utils.autoreload /mnt/e/projects/belstat/python/dictionaty_ai/frontend/accounts/utils.py changed, reloading.
2025-08-15 07:21:32 INFO django.utils.autoreload /mnt/e/projects/belstat/python/dictionaty_ai/frontend/accounts/utils.py changed, reloading.
Performing system checks...

System check identified no issues (0 silenced).
August 15, 2025 - 07:21:24
Django version 5.2.5, using settings 'DictionaryFront.settings'
Starting development server at http://0.0.0.0:8001/
Quit the server with CONTROL-C.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
2025-08-15 07:21:34 INFO django.utils.autoreload Watching for file changes with StatReloader
2025-08-15 07:21:34 INFO django.utils.autoreload Watching for file changes with StatReloader
2025-08-15 07:21:34 INFO accounts.views API_BASE настроен на: http://127.0.0.1:9090/api/v1/auth
2025-08-15 07:21:41 INFO django.utils.autoreload /mnt/e/projects/belstat/python/dictionaty_ai/frontend/accounts/views.py changed, reloading.
2025-08-15 07:21:41 INFO django.utils.autoreload /mnt/e/projects/belstat/python/dictionaty_ai/frontend/accounts/views.py changed, reloading.
Performing system checks...

System check identified no issues (0 silenced).
August 15, 2025 - 07:21:34
Django version 5.2.5, using settings 'DictionaryFront.settings'
Starting development server at http://0.0.0.0:8001/
Quit the server with CONTROL-C.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
2025-08-15 07:21:44 INFO django.utils.autoreload Watching for file changes with StatReloader
2025-08-15 07:21:44 INFO django.utils.autoreload Watching for file changes with StatReloader
2025-08-15 07:21:44 INFO accounts.views API_BASE настроен на: http://127.0.0.1:9090/api/v1/auth
2025-08-15 07:22:39 INFO accounts.utils AUTH_EVENT: login_attempt - User: admin_db_app@belstat - IP: 127.0.0.1
2025-08-15 07:22:39 INFO accounts.views === НАЧАЛО АВТОРИЗАЦИИ ===
2025-08-15 07:22:39 INFO accounts.views Пользователь: admin_db_app
2025-08-15 07:22:39 INFO accounts.views Домен: belstat
2025-08-15 07:22:39 INFO accounts.views Время запроса: 2025-08-15 07:22:39.589254+00:00
2025-08-15 07:22:39 INFO accounts.views IP адрес: 127.0.0.1
2025-08-15 07:22:39 INFO accounts.views User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/141.0
2025-08-15 07:22:39 INFO accounts.views Конфигурация AUTH_CONFIG: {'USE_EXTERNAL_API': True, 'EXTERNAL_API': {'BASE_URL': 'http://127.0.0.1:9090/api/v1/auth', 'ENABLED': True, 'TIMEOUT': 30, 'RETRY_ATTEMPTS': 3}, 'LOCAL_AUTH': {'ENABLED': False, 'FALLBACK': False}}
2025-08-15 07:22:39 INFO accounts.utils SYSTEM_EVENT: auth_manager_init - AuthManager инициализирован: external_api_enabled=True - Data: {'external_api_enabled': True, 'config': {'BASE_URL': 'http://127.0.0.1:9090/api/v1/auth', 'ENABLED': True, 'TIMEOUT': 30, 'RETRY_ATTEMPTS': 3}}
2025-08-15 07:22:39 INFO accounts.views Менеджер авторизации загружен: AuthManager
2025-08-15 07:22:39 INFO accounts.utils AUTH_EVENT: auth_start - User: admin_db_app@belstat - IP: 127.0.0.1
2025-08-15 07:22:39 INFO accounts.utils SYSTEM_EVENT: auth_method - Попытка аутентификации через внешний API
2025-08-15 07:22:39 INFO accounts.auth_manager === ВНЕШНИЙ API: Начало ===
2025-08-15 07:22:39 INFO accounts.auth_manager Base URL: http://127.0.0.1:9090/api/v1/auth
2025-08-15 07:22:39 INFO accounts.auth_manager Timeout: 30 сек
2025-08-15 07:22:39 INFO accounts.auth_manager Попытки повтора: 3
2025-08-15 07:22:39 INFO accounts.auth_manager URL запроса: http://127.0.0.1:9090/api/v1/auth/login
2025-08-15 07:22:39 INFO accounts.auth_manager Заголовки: {'Content-Type': 'application/json', 'Accept': 'application/json'}
2025-08-15 07:22:39 INFO accounts.auth_manager Данные запроса: admin_db_app@belstat
2025-08-15 07:22:39 INFO accounts.auth_manager Полные данные (без пароля): {'username': 'admin_db_app', 'domain': 'belstat'}
2025-08-15 07:22:39 INFO accounts.auth_manager --- Попытка 1/3 ---
2025-08-15 07:22:39 INFO accounts.auth_manager Отправка POST запроса на http://127.0.0.1:9090/api/v1/auth/login
2025-08-15 07:22:39 INFO accounts.auth_manager Получен ответ за 0.18 сек
2025-08-15 07:22:39 INFO accounts.auth_manager HTTP статус: 200
2025-08-15 07:22:39 INFO accounts.auth_manager Заголовки ответа: {'date': 'Fri, 15 Aug 2025 07:22:39 GMT', 'server': 'uvicorn', 'content-length': '775', 'content-type': 'application/json', 'x-content-type-options': 'nosniff', 'x-frame-options': 'DENY', 'x-xss-protection': '1; mode=block', 'x-processing-time': '0.1746659278869629', 'x-ratelimit-limit': '200/minute, 2000/hour, 20000/day', 'x-ratelimit-remaining': 'calculated'}
2025-08-15 07:22:39 INFO accounts.auth_manager Размер ответа: 775 байт
2025-08-15 07:22:39 INFO accounts.auth_manager JSON ответ: {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NTUyNDQzNTksImlhdCI6MTc1NTI0MjU1OSwic2NvcGUiOiJhY2Nlc3NfdG9rZW4iLCJzdWIiOiJ7XCJndWlkXCI6XCI4YzUyN2Y0ZC1jMDczLTQ1M2MtYjhiNS0wODJlMDQwYjRkMTlcIixcInVzZXJuYW1lXCI6XCJcdTA0MTBcdTA0MzRcdTA0M2NcdTA0MzhcdTA0M2QgXHUwNDIxXHUwNDFmX1x1MDQxMVx1MDQxNFwiLFwiZG9tYWluXCI6XCJiZWxzdGF0XCJ9In0.ThItts_oqs-bpGordJh2ap7OtPvFUSFA3TC-78Jytd4', 'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NTU4NDczNTksImlhdCI6MTc1NTI0MjU1OSwic2NvcGUiOiJyZWZyZXNoX3Rva2VuIiwic3ViIjoie1wiZ3VpZFwiOlwiOGM1MjdmNGQtYzA3My00NTNjLWI4YjUtMDgyZTA0MGI0ZDE5XCIsXCJ1c2VybmFtZVwiOlwiXHUwNDEwXHUwNDM0XHUwNDNjXHUwNDM4XHUwNDNkIFx1MDQyMVx1MDQxZl9cdTA0MTFcdTA0MTRcIixcImRvbWFpblwiOlwiYmVsc3RhdFwifSJ9.d8bCChQMJX_hYDhycnwbhlWerPCvfzAI_gs09JhNJkg'}
2025-08-15 07:22:39 INFO accounts.auth_manager ✅ Валидный ответ с токенами получен
2025-08-15 07:22:39 INFO accounts.auth_manager === Проверка прав доступа ===
2025-08-15 07:22:39 INFO accounts.auth_manager Access token для проверки прав: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3N...
2025-08-15 07:22:39 INFO accounts.auth_manager Длина access token: 368
2025-08-15 07:22:39 INFO accounts.permissions Проверка прав доступа для пользователя admin_db_app в домене belstat
2025-08-15 07:22:40 INFO accounts.permissions Пользователь admin_db_app@belstat имеет доступ. Группы: ['EISGS_Users', 'EISGS_AppSecurity']
2025-08-15 07:22:40 INFO accounts.auth_manager ✅ Пользователь admin_db_app@belstat имеет права доступа
2025-08-15 07:22:40 INFO accounts.auth_manager Группы пользователя: ['EISGS_Users', 'EISGS_AppSecurity']
2025-08-15 07:22:40 INFO accounts.utils AUTH_EVENT: auth_success - User: admin_db_app@belstat - IP: 127.0.0.1
2025-08-15 07:22:40 INFO accounts.views Результат авторизации: success=True, error=None
2025-08-15 07:22:40 INFO accounts.views Запись в аудите создана
2025-08-15 07:22:40 INFO accounts.views === УСПЕШНАЯ АВТОРИЗАЦИЯ ===
2025-08-15 07:22:40 INFO accounts.views Получены токены: True, True
2025-08-15 07:22:40 INFO accounts.views Токены сохранены в сессии
2025-08-15 07:22:40 INFO accounts.views GET_DATA request → url=http://127.0.0.1:9090/api/v1/auth/get_data, headers={'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NTUyNDQzNTksImlhdCI6MTc1NTI0MjU1OSwic2NvcGUiOiJhY2Nlc3NfdG9rZW4iLCJzdWIiOiJ7XCJndWlkXCI6XCI4YzUyN2Y0ZC1jMDczLTQ1M2MtYjhiNS0wODJlMDQwYjRkMTlcIixcInVzZXJuYW1lXCI6XCJcdTA0MTBcdTA0MzRcdTA0M2NcdTA0MzhcdTA0M2QgXHUwNDIxXHUwNDFmX1x1MDQxMVx1MDQxNFwiLFwiZG9tYWluXCI6XCJiZWxzdGF0XCJ9In0.ThItts_oqs-bpGordJh2ap7OtPvFUSFA3TC-78Jytd4', 'Content-Type': 'application/json'}, timeout=10
2025-08-15 07:22:40 INFO accounts.views GET_DATA response ← status=200, headers={'date': 'Fri, 15 Aug 2025 07:22:39 GMT', 'server': 'uvicorn', 'content-length': '169', 'content-type': 'application/json', 'x-content-type-options': 'nosniff', 'x-frame-options': 'DENY', 'x-xss-protection': '1; mode=block', 'x-processing-time': '0.016403913497924805', 'x-ratelimit-limit': '200/minute, 2000/hour, 20000/day', 'x-ratelimit-remaining': 'calculated'}
2025-08-15 07:22:40 INFO accounts.views GET_DATA body ← {"status":"success","user":{"guid":"8c527f4d-c073-453c-b8b5-082e040b4d19","username":"Админ СП_БД","domain":"belstat"},"timestamp":"2025-08-15T07:22:40.179708"}
2025-08-15 07:22:40 INFO accounts.views Информация о пользователе получена: Админ СП_БД
2025-08-15 07:22:40 INFO accounts.views has_audit_access(session) = True
2025-08-15 07:22:40 INFO accounts.views Установлена сессия до закрытия браузера
2025-08-15 07:22:40 INFO accounts.views === АВТОРИЗАЦИЯ ЗАВЕРШЕНА УСПЕШНО ===
2025-08-15 07:22:40 INFO accounts.utils AUTH_EVENT: login_success - User: admin_db_app@belstat - IP: 127.0.0.1
2025-08-15 07:22:40 INFO accounts.utils AUDIT POST → http://127.0.0.1:8000/api/v1/audit/log payload={'username': 'Админ СП_БД', 'domain': 'belstat', 'ip_address': '127.0.0.1', 'user_agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/141.0', 'action': 'Логин пользователя', 'status': 'успешно', 'comment': '', 'guid': '8c527f4d-c073-453c-b8b5-082e040b4d19'}
2025-08-15 07:22:40 INFO accounts.utils AUDIT POST ← status=201 body={"id":49,"username":"Админ СП_БД","domain":"belstat","ip_address":"127.0.0.1","user_agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/141.0","action":"Логин пользователя","datetime":"2025-08-15T07:19:23.431082","status":"успешно","comment":""}
2025-08-15 07:22:40 INFO accounts.utils USER_ACTION: user_login - {'method': 'form_login', 'domain': 'belstat'}
2025-08-15 07:22:40 INFO django.server "POST /accounts/login/ HTTP/1.1" 200 162
2025-08-15 07:22:40 INFO django.server "POST /accounts/login/ HTTP/1.1" 200 162
2025-08-15 07:22:41 INFO accounts.middleware GET_DATA request → url=http://127.0.0.1:9090/api/v1/auth/get_data, headers={'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NTUyNDQzNTksImlhdCI6MTc1NTI0MjU1OSwic2NvcGUiOiJhY2Nlc3NfdG9rZW4iLCJzdWIiOiJ7XCJndWlkXCI6XCI4YzUyN2Y0ZC1jMDczLTQ1M2MtYjhiNS0wODJlMDQwYjRkMTlcIixcInVzZXJuYW1lXCI6XCJcdTA0MTBcdTA0MzRcdTA0M2NcdTA0MzhcdTA0M2QgXHUwNDIxXHUwNDFmX1x1MDQxMVx1MDQxNFwiLFwiZG9tYWluXCI6XCJiZWxzdGF0XCJ9In0.ThItts_oqs-bpGordJh2ap7OtPvFUSFA3TC-78Jytd4', 'Content-Type': 'application/json'}, timeout=10
2025-08-15 07:22:41 INFO accounts.middleware GET_DATA response ← status=200, headers={'date': 'Fri, 15 Aug 2025 07:22:40 GMT', 'server': 'uvicorn', 'content-length': '169', 'content-type': 'application/json', 'x-content-type-options': 'nosniff', 'x-frame-options': 'DENY', 'x-xss-protection': '1; mode=block', 'x-processing-time': '0.01652693748474121', 'x-ratelimit-limit': '200/minute, 2000/hour, 20000/day', 'x-ratelimit-remaining': 'calculated'}
2025-08-15 07:22:41 INFO accounts.middleware GET_DATA body ← {"status":"success","user":{"guid":"8c527f4d-c073-453c-b8b5-082e040b4d19","username":"Админ СП_БД","domain":"belstat"},"timestamp":"2025-08-15T07:22:41.279236"}
2025-08-15 07:22:41 INFO accounts.utils AUTH_EVENT: middleware_token_valid - User: Админ СП_БД@unknown - IP: 127.0.0.1
2025-08-15 07:22:41 INFO django.server "GET / HTTP/1.1" 200 39474
2025-08-15 07:22:41 INFO django.server "GET / HTTP/1.1" 200 39474
2025-08-15 07:22:45 INFO accounts.middleware GET_DATA request → url=http://127.0.0.1:9090/api/v1/auth/get_data, headers={'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NTUyNDQzNTksImlhdCI6MTc1NTI0MjU1OSwic2NvcGUiOiJhY2Nlc3NfdG9rZW4iLCJzdWIiOiJ7XCJndWlkXCI6XCI4YzUyN2Y0ZC1jMDczLTQ1M2MtYjhiNS0wODJlMDQwYjRkMTlcIixcInVzZXJuYW1lXCI6XCJcdTA0MTBcdTA0MzRcdTA0M2NcdTA0MzhcdTA0M2QgXHUwNDIxXHUwNDFmX1x1MDQxMVx1MDQxNFwiLFwiZG9tYWluXCI6XCJiZWxzdGF0XCJ9In0.ThItts_oqs-bpGordJh2ap7OtPvFUSFA3TC-78Jytd4', 'Content-Type': 'application/json'}, timeout=10
2025-08-15 07:22:45 INFO accounts.middleware GET_DATA response ← status=200, headers={'date': 'Fri, 15 Aug 2025 07:22:44 GMT', 'server': 'uvicorn', 'content-length': '169', 'content-type': 'application/json', 'x-content-type-options': 'nosniff', 'x-frame-options': 'DENY', 'x-xss-protection': '1; mode=block', 'x-processing-time': '0.016605377197265625', 'x-ratelimit-limit': '200/minute, 2000/hour, 20000/day', 'x-ratelimit-remaining': 'calculated'}
2025-08-15 07:22:45 INFO accounts.middleware GET_DATA body ← {"status":"success","user":{"guid":"8c527f4d-c073-453c-b8b5-082e040b4d19","username":"Админ СП_БД","domain":"belstat"},"timestamp":"2025-08-15T07:22:45.226190"}
2025-08-15 07:22:45 INFO accounts.utils AUTH_EVENT: middleware_token_valid - User: Админ СП_БД@unknown - IP: 127.0.0.1
2025-08-15 07:22:45 INFO accounts.utils USERS GET → http://127.0.0.1:8000/api/v1/users params={'page': 1, 'page_size': 25}
2025-08-15 07:22:45 INFO accounts.utils USERS GET ← status=200
2025-08-15 07:22:45 INFO django.server "GET /accounts/users/ HTTP/1.1" 200 37434
2025-08-15 07:22:45 INFO django.server "GET /accounts/users/ HTTP/1.1" 200 37434
2025-08-15 07:25:00 INFO django.utils.autoreload /mnt/e/projects/belstat/python/dictionaty_ai/frontend/accounts/utils.py changed, reloading.
2025-08-15 07:25:00 INFO django.utils.autoreload /mnt/e/projects/belstat/python/dictionaty_ai/frontend/accounts/utils.py changed, reloading.
Performing system checks...

System check identified no issues (0 silenced).
August 15, 2025 - 07:21:44
Django version 5.2.5, using settings 'DictionaryFront.settings'
Starting development server at http://0.0.0.0:8001/
Quit the server with CONTROL-C.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
2025-08-15 07:25:02 INFO django.utils.autoreload Watching for file changes with StatReloader
2025-08-15 07:25:02 INFO django.utils.autoreload Watching for file changes with StatReloader
2025-08-15 07:25:03 INFO accounts.views API_BASE настроен на: http://127.0.0.1:9090/api/v1/auth
2025-08-15 07:25:18 INFO django.utils.autoreload /mnt/e/projects/belstat/python/dictionaty_ai/frontend/accounts/views.py changed, reloading.
2025-08-15 07:25:18 INFO django.utils.autoreload /mnt/e/projects/belstat/python/dictionaty_ai/frontend/accounts/views.py changed, reloading.
Performing system checks...

System check identified no issues (0 silenced).
August 15, 2025 - 07:25:03
Django version 5.2.5, using settings 'DictionaryFront.settings'
Starting development server at http://0.0.0.0:8001/
Quit the server with CONTROL-C.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
2025-08-15 07:25:20 INFO django.utils.autoreload Watching for file changes with StatReloader
2025-08-15 07:25:20 INFO django.utils.autoreload Watching for file changes with StatReloader
2025-08-15 07:25:20 INFO accounts.views API_BASE настроен на: http://127.0.0.1:9090/api/v1/auth
2025-08-15 07:25:43 INFO django.utils.autoreload /mnt/e/projects/belstat/python/dictionaty_ai/frontend/accounts/views.py changed, reloading.
2025-08-15 07:25:43 INFO django.utils.autoreload /mnt/e/projects/belstat/python/dictionaty_ai/frontend/accounts/views.py changed, reloading.
Performing system checks...

System check identified no issues (0 silenced).
August 15, 2025 - 07:25:21
Django version 5.2.5, using settings 'DictionaryFront.settings'
Starting development server at http://0.0.0.0:8001/
Quit the server with CONTROL-C.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
2025-08-15 07:25:45 INFO django.utils.autoreload Watching for file changes with StatReloader
2025-08-15 07:25:45 INFO django.utils.autoreload Watching for file changes with StatReloader
2025-08-15 07:25:45 INFO accounts.views API_BASE настроен на: http://127.0.0.1:9090/api/v1/auth
2025-08-15 07:27:45 INFO django.utils.autoreload /mnt/e/projects/belstat/python/dictionaty_ai/frontend/accounts/views.py changed, reloading.
2025-08-15 07:27:45 INFO django.utils.autoreload /mnt/e/projects/belstat/python/dictionaty_ai/frontend/accounts/views.py changed, reloading.
Performing system checks...

System check identified no issues (0 silenced).
August 15, 2025 - 07:25:46
Django version 5.2.5, using settings 'DictionaryFront.settings'
Starting development server at http://0.0.0.0:8001/
Quit the server with CONTROL-C.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
2025-08-15 07:27:47 INFO django.utils.autoreload Watching for file changes with StatReloader
2025-08-15 07:27:47 INFO django.utils.autoreload Watching for file changes with StatReloader
2025-08-15 07:27:47 INFO accounts.views API_BASE настроен на: http://127.0.0.1:9090/api/v1/auth
2025-08-15 07:29:34 INFO accounts.middleware GET_DATA request → url=http://127.0.0.1:9090/api/v1/auth/get_data, headers={'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NTUyNDQzNTksImlhdCI6MTc1NTI0MjU1OSwic2NvcGUiOiJhY2Nlc3NfdG9rZW4iLCJzdWIiOiJ7XCJndWlkXCI6XCI4YzUyN2Y0ZC1jMDczLTQ1M2MtYjhiNS0wODJlMDQwYjRkMTlcIixcInVzZXJuYW1lXCI6XCJcdTA0MTBcdTA0MzRcdTA0M2NcdTA0MzhcdTA0M2QgXHUwNDIxXHUwNDFmX1x1MDQxMVx1MDQxNFwiLFwiZG9tYWluXCI6XCJiZWxzdGF0XCJ9In0.ThItts_oqs-bpGordJh2ap7OtPvFUSFA3TC-78Jytd4', 'Content-Type': 'application/json'}, timeout=10
2025-08-15 07:29:34 INFO accounts.middleware GET_DATA response ← status=200, headers={'date': 'Fri, 15 Aug 2025 07:29:34 GMT', 'server': 'uvicorn', 'content-length': '169', 'content-type': 'application/json', 'x-content-type-options': 'nosniff', 'x-frame-options': 'DENY', 'x-xss-protection': '1; mode=block', 'x-processing-time': '0.016109466552734375', 'x-ratelimit-limit': '200/minute, 2000/hour, 20000/day', 'x-ratelimit-remaining': 'calculated'}
2025-08-15 07:29:34 INFO accounts.middleware GET_DATA body ← {"status":"success","user":{"guid":"8c527f4d-c073-453c-b8b5-082e040b4d19","username":"Админ СП_БД","domain":"belstat"},"timestamp":"2025-08-15T07:29:34.994261"}
2025-08-15 07:29:34 INFO accounts.utils AUTH_EVENT: middleware_token_valid - User: Админ СП_БД@unknown - IP: 127.0.0.1
2025-08-15 07:29:34 INFO accounts.utils USERS GET → http://127.0.0.1:8000/api/v1/users params={'page': 1, 'page_size': 25}
2025-08-15 07:29:35 INFO accounts.utils USERS GET ← status=200
2025-08-15 07:29:35 INFO django.server "GET /accounts/users/ HTTP/1.1" 200 37570
2025-08-15 07:29:35 INFO django.server "GET /accounts/users/ HTTP/1.1" 200 37570
